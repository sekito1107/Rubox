<aside
  class="w-80 border-l border-slate-200 dark:border-white/5 bg-slate-50 dark:bg-[#0D1117] flex flex-col shrink-0"
  data-controller="rurema--global rurema--contextual"
>
  <div class="h-10 border-b border-slate-200 dark:border-white/5 flex items-center justify-between px-4 bg-slate-100 dark:bg-white/5">
    <div class="flex items-center gap-2">
      <%= inline_svg_tag "icons/ruby.svg", class: "w-3 h-3 grayscale opacity-50" %>
      <span class="text-xs font-bold text-slate-700 dark:text-slate-300">Rurema Context</span>
    </div>
    <span class="text-[10px] text-slate-500 dark:text-slate-600 tracking-wider font-medium">LIVE</span>
  </div>

  <div class="flex-1 flex flex-col min-h-0 overflow-hidden">
    <!-- Contextual List (Cursor based) -->
    <div class="shrink-0 border-b border-slate-200 dark:border-white/5 bg-slate-50/50 dark:bg-white/[0.02]">
      <div class="px-3 py-2 text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider flex items-center justify-between">
        <span>Contextual</span>
        <span class="text-blue-500 dark:text-blue-400 opacity-0 transition-opacity" data-rurema--contextual-target="contextualLoader">●</span>
      </div>
      <div class="px-3 pb-2 space-y-2 max-h-[400px] overflow-y-auto" data-rurema--contextual-target="contextualList">
        <div class="text-xs text-slate-400 dark:text-slate-600 text-center py-2 italic">
          Hover to see methods...
        </div>
      </div>
    </div>

    <!-- Global List (Regex based) -->
    <div class="flex-1 flex flex-col min-h-0">
      <div class="px-3 py-2 text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider sticky top-0 bg-slate-50 dark:bg-[#0D1117] z-10">
        Global
      </div>
      <div class="flex-1 px-3 pb-3 overflow-y-auto space-y-3" data-rurema--global-target="globalList">
        <div class="text-xs text-slate-500 dark:text-slate-600 text-center py-4">
          No methods detected
        </div>
      </div>
    </div>
  </div>

  <%# メソッドカードのテンプレート %>
  <template data-rurema--global-target="cardTemplate" data-rurema--contextual-target="cardTemplate">
    <div class="bg-white dark:bg-[#161b22] border border-slate-200 dark:border-white/5 rounded-md overflow-hidden shadow-sm dark:shadow-none mb-3">
      <div class="px-3 py-2 bg-slate-50 dark:bg-white/5 border-b border-slate-200 dark:border-white/5 flex items-center gap-2">
        <span class="text-blue-600 dark:text-blue-400 text-xs font-mono" data-role="icon">&lt;&gt;</span>
        <span class="text-slate-800 dark:text-slate-200 text-sm font-semibold font-mono" data-role="methodName"></span>
      </div>
      <div class="p-3 space-y-2" data-role="linksDetails">
        <%# リンク詳細がここに挿入されます %>
      </div>
    </div>
  </template>

  <%# 個別リンクのテンプレート %>
  <template data-rurema--global-target="linkTemplate" data-rurema--contextual-target="linkTemplate">
    <a href="#" target="_blank" rel="noopener noreferrer"
       class="block text-xs text-slate-600 dark:text-slate-400 font-mono hover:text-blue-600 dark:hover:text-blue-400 transition-colors">
      <span data-role="className"></span><span class="text-red-500 dark:text-red-400" data-role="separatorMethod"></span>
    </a>
  </template>

  <%# 検索リンクのテンプレート (Globalのみ使用) %>
  <template data-rurema--global-target="searchTemplate">
    <a href="#" target="_blank" rel="noopener noreferrer"
       class="text-xs text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1">
      Search in Rurema
      <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
      </svg>
    </a>
  </template>
</aside>
